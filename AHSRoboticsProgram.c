#pragma config(Motor,  port2,           rightClawServo, tmotorServoStandard, openLoop)
#pragma config(Motor,  port3,           leftClawServo, tmotorServoStandard, openLoop)
#pragma config(Motor,  port4,           wheelLeft,     tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port6,           wheelRight,    tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port8,           motorLift,     tmotorVex269_MC29, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#define ARM_LEFT_LOCK_POSITION -150
#define ARM_LEFT_UNLOCK_POSITION 0

#define ARM_RIGHT_LOCK_POSITION 0
#define ARM_RIGHT_UNLOCK_POSITION -150

typedef struct ControllerSettings
{
	int RaiseButton;
	int DropButton;
	int ArmLockButton;
	int DeadBand;
} ControllerSettings;

static ControllerSettings Settings;

bool bArmsAreExtended;

void UpdateServos();
void UpdateWheels();
int AbsoluteValue(int value);


task main()
{
	// Declare variables
	bArmsAreExtended = false;
	Settings.DeadBand = 17;

	while (true)
	{
		UpdateServos(); // Run the Code contained within "UpdateServos()"
		UpdateWheels(); // Run the Code contained within "UpdateWheels()"
	}
}


// Function definitions
void UpdateServos()
{
	if (vexRT[Settings.ArmLockButton]) // if Button 8R is pressed
	{
		bArmsAreExtended = !bArmsAreExtended; // Toggle the arm extension
	}

	if (bArmsAreExtended) // If the launcher is in the locked state
	{
		if (motor[rightClawServo] != ARM_RIGHT_LOCK_POSITION) // If it is not already in the lock position
		{
			motor[rightClawServo] = ARM_RIGHT_LOCK_POSITION; // Set it to the lock position
		}
		if (motor[leftClawServo] != ARM_LEFT_LOCK_POSITION) // If it is not already in the lock position
		{
			motor[leftClawServo] = ARM_LEFT_LOCK_POSITION; // Set it to the lock position
		}
	}
	else // Otherwise it isn't in the lock state
	{

		if (motor[rightClawServo] != ARM_RIGHT_UNLOCK_POSITION) // If it is not already in the lock position
		{
			motor[rightClawServo] = ARM_RIGHT_UNLOCK_POSITION; // Set it to the lock position
		}
		if (motor[leftClawServo] != ARM_LEFT_UNLOCK_POSITION) // If it is not already in the lock position
		{
			motor[leftClawServo] = ARM_LEFT_UNLOCK_POSITION; // Set it to the lock position
		}
	}
}

void UpdateWheels()
{
	int channel2 = vexRT[Ch2];
	int channel3 = vexRT[Ch3];

	if (AbsoluteValue(channel2) > Settings.DeadBand)
	{
		motor[wheelRight] = channel2; // Set the right motor equal to the right joystick h
	}
	if (AbsoluteValue(channel3) > Settings.DeadBand)
	{
		motor[wheelLeft] = channel3; // Set the left motor equal to the left joystick pitch
	}
}

int AbsoluteValue(int value)
{
	if (value < 0)
	{
		return value * -1;
	}
	return value;
}
